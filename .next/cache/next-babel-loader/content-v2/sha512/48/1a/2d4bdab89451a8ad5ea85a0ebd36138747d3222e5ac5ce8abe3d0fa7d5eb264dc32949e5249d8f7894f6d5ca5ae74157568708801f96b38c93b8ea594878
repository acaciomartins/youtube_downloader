{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dev/youtube_downloader/pages/index.js\";\nimport axios from \"axios\";\nimport { URLSearchParams } from \"url\"; // import VideoInfo from './models/VideoInfo';\n\nfunction Home() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"ID do V\\xEDdeo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"videoId\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => getVideoInfo(),\n      children: \"Informa\\xE7\\xF5es do v\\xEDdeo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      id: \"json\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"https://r7---sn-8p8v-bg0l.googlevideo.com/videoplayback?expire=1612390933&ei=tc0aYLLPIYy0wATdwq3gCA&ip=2804%3A431%3Ac7eb%3A4e64%3A9abd%3Af223%3A4295%3A577d&id=o-AMgtCUUHCOdsCrhOS0cYNkEj7-LHQ28tIygXAqfbN5XT&itag=18&source=youtube&requiressl=yes&mh=_3&mm=31%2C29&mn=sn-8p8v-bg0l%2Csn-bg0ezn7y&ms=au%2Crdu&mv=m&mvi=7&pcm2cms=yes&pl=47&initcwndbps=487500&vprv=1&mime=video%2Fmp4&ns=78ocSwZS8LB6mZedwr_cxGUF&gir=yes&clen=321643417&ratebypass=yes&dur=9390.056&lmt=1612344648579492&mt=1612368778&fvip=1&beids=23886210&c=WEB&txp=5310224&n=eJul8k2Km1otVAZPZZHJm4&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&sig=AOq0QJ8wRgIhAOHQSqo28eurAWTA0tNW3shNQ05bVJQ4FtR2Mxl97UygAiEA8G7Nrkws0BiXDQ9-0WKye2Vp6jGqNO8YR6m3QahUyDk%3D&lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpcm2cms%2Cpl%2Cinitcwndbps&lsig=AG3C_xAwRgIhAMb8kXeWX7XK9-gRprkgH619TtUT5UIRyInOslOgXJ6UAiEA00Td7iKO93ALmEcdV3Gtg4E_y_2UYYN4V9SXsoYBsAA%3D\",\n      download: true,\n      children: \"Download Receipt\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, this);\n}\n\nasync function getVideoInfo() {\n  const videoIdRegex = /^[\\w_-]+$/;\n  const videoId = \"jks4D01cF_k\";\n  const eurl = `https://youtube.googleapis.com/v/${videoId}`;\n\n  if (!videoIdRegex.test(videoId)) {\n    throw new Error(\"Invalid videoId.\");\n  }\n\n  const response = await axios.get(`https://www.youtube.com/get_video_info?video_id=${videoId}&el=embedded&eurl=${eurl}&sts=18333`, {\n    headers: {\n      Accept: \"application/json\"\n    }\n  });\n  console.log(\"aqui \", eurl);\n  response.headers[\"content-type\"];\n  const {\n    data\n  } = response; //   console.log(\"1....: \", qsToJson(data));\n  // const parsedResponse = response.data;\n  // const jsonResponse = JSON.parse(parsedResponse.player_response);\n\n  document.getElementById(\"json\").innerHTML = qsToJson(data); //   console.log('2....: ', JSON.stringify(data));\n  //   console.log(\"2....: \", qsToJson(data));\n\n  const stream = qsToJson(data);\n  const player_response = JSON.parse(stream.player_response);\n  console.log(\"-------- \", player_response.streamingData.formats[0]);\n  downloadURI(player_response.streamingData.formats[0].url, 'bla'); // window.location.href = player_response.streamingData.formats[0].url;\n  // const { playabilityStatus, videoDetails, streamingData } = jsonResponse;\n  // const videoInfo = { playabilityStatus, videoDetails, streamingData };\n  // return videoInfo;\n\n  return \"\";\n}\n\nfunction downloadURI(uri, name) {\n  var link = document.createElement(\"a\");\n  link.download = name;\n  link.href = uri; // link.setAttribute('href', 'video/mp4' + encodeURIComponent(uri));\n  // 'video/mp4;+codecs=\"avc1.42001E,+mp4a.40.2\"'\n  // link.setAttribute('target', '_parent');\n\n  link.setAttribute('data-type', \"mp4\");\n  document.body.appendChild(link);\n  link.click(); // document.body.removeChild(link);\n  // delete link;\n}\n\nfunction qsToJson(qs) {\n  var res = {};\n  var pars = qs.split(\"&\");\n  var kv, k, v;\n  var obj = {}; //   pars.map((e) => {\n  //     kv = e.split(\"=\");\n  //     k = kv[0];\n  //     v = kv[1];\n  //     console.log('res...:', res);\n  //     res[k] = decodeURIComponent(v);\n  //     console.log(\"res[k] \", res);\n  //   });\n\n  pars.map(e => {\n    kv = e.split(\"=\");\n    k = kv[0];\n    v = kv[1];\n\n    if (k === \"player_response\") {\n      res[k] = decodeURIComponent(v); // console.log('-------- ', JSON.parse(res[k]).streamingData)\n    }\n  }); //   console.log(\"-------- \", JSON.parse(res.player_response));\n\n  return res;\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/dev/youtube_downloader/pages/index.js"],"names":["axios","URLSearchParams","Home","getVideoInfo","videoIdRegex","videoId","eurl","test","Error","response","get","headers","Accept","console","log","data","document","getElementById","innerHTML","qsToJson","stream","player_response","JSON","parse","streamingData","formats","downloadURI","url","uri","name","link","createElement","download","href","setAttribute","body","appendChild","click","qs","res","pars","split","kv","k","v","obj","map","e","decodeURIComponent"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { URLSearchParams } from \"url\";\n\n// import VideoInfo from './models/VideoInfo';\n\nfunction Home() {\n  return (\n    <div>\n      <label>ID do Vídeo</label>\n      <input type=\"text\" id=\"videoId\"></input>\n      <button onClick={() => getVideoInfo()}>Informações do vídeo</button>\n      <br></br>\n      <span id=\"json\"></span>\n      <a href=\"https://r7---sn-8p8v-bg0l.googlevideo.com/videoplayback?expire=1612390933&ei=tc0aYLLPIYy0wATdwq3gCA&ip=2804%3A431%3Ac7eb%3A4e64%3A9abd%3Af223%3A4295%3A577d&id=o-AMgtCUUHCOdsCrhOS0cYNkEj7-LHQ28tIygXAqfbN5XT&itag=18&source=youtube&requiressl=yes&mh=_3&mm=31%2C29&mn=sn-8p8v-bg0l%2Csn-bg0ezn7y&ms=au%2Crdu&mv=m&mvi=7&pcm2cms=yes&pl=47&initcwndbps=487500&vprv=1&mime=video%2Fmp4&ns=78ocSwZS8LB6mZedwr_cxGUF&gir=yes&clen=321643417&ratebypass=yes&dur=9390.056&lmt=1612344648579492&mt=1612368778&fvip=1&beids=23886210&c=WEB&txp=5310224&n=eJul8k2Km1otVAZPZZHJm4&sparams=expire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Cvprv%2Cmime%2Cns%2Cgir%2Cclen%2Cratebypass%2Cdur%2Clmt&sig=AOq0QJ8wRgIhAOHQSqo28eurAWTA0tNW3shNQ05bVJQ4FtR2Mxl97UygAiEA8G7Nrkws0BiXDQ9-0WKye2Vp6jGqNO8YR6m3QahUyDk%3D&lsparams=mh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpcm2cms%2Cpl%2Cinitcwndbps&lsig=AG3C_xAwRgIhAMb8kXeWX7XK9-gRprkgH619TtUT5UIRyInOslOgXJ6UAiEA00Td7iKO93ALmEcdV3Gtg4E_y_2UYYN4V9SXsoYBsAA%3D\" download>Download Receipt</a>\n    </div>\n  );\n}\n\nasync function getVideoInfo() {\n  const videoIdRegex = /^[\\w_-]+$/;\n  const videoId = \"jks4D01cF_k\";\n  const eurl = `https://youtube.googleapis.com/v/${videoId}`;\n  if (!videoIdRegex.test(videoId)) {\n    throw new Error(\"Invalid videoId.\");\n  }\n\n  const response = await axios.get(\n    `https://www.youtube.com/get_video_info?video_id=${videoId}&el=embedded&eurl=${eurl}&sts=18333`,\n    {\n      headers: { Accept: \"application/json\" },\n    }\n  );\n  console.log(\"aqui \", eurl);\n  response.headers[\"content-type\"];\n\n  const { data } = response;\n  //   console.log(\"1....: \", qsToJson(data));\n\n  // const parsedResponse = response.data;\n  // const jsonResponse = JSON.parse(parsedResponse.player_response);\n\n  document.getElementById(\"json\").innerHTML = qsToJson(data);\n  //   console.log('2....: ', JSON.stringify(data));\n  //   console.log(\"2....: \", qsToJson(data));\n  const stream = qsToJson(data);\n  const player_response = JSON.parse(stream.player_response);\n\n  console.log(\"-------- \", player_response.streamingData.formats[0]);\n  downloadURI(player_response.streamingData.formats[0].url, 'bla');\n// window.location.href = player_response.streamingData.formats[0].url;\n  // const { playabilityStatus, videoDetails, streamingData } = jsonResponse;\n  // const videoInfo = { playabilityStatus, videoDetails, streamingData };\n\n  // return videoInfo;\n  return \"\";\n}\n\nfunction downloadURI(uri, name) {\n    var link = document.createElement(\"a\");\n    link.download = name;\n    link.href = uri;\n    \n    // link.setAttribute('href', 'video/mp4' + encodeURIComponent(uri));\n    // 'video/mp4;+codecs=\"avc1.42001E,+mp4a.40.2\"'\n    // link.setAttribute('target', '_parent');\n    link.setAttribute('data-type', \"mp4\")\n    document.body.appendChild(link);\n    link.click();\n    // document.body.removeChild(link);\n    // delete link;\n  }\n\nfunction qsToJson(qs) {\n  var res = {};\n  var pars = qs.split(\"&\");\n  var kv, k, v;\n  var obj = {};\n\n  //   pars.map((e) => {\n  //     kv = e.split(\"=\");\n  //     k = kv[0];\n  //     v = kv[1];\n  //     console.log('res...:', res);\n  //     res[k] = decodeURIComponent(v);\n\n  //     console.log(\"res[k] \", res);\n  //   });\n  pars.map((e) => {\n    kv = e.split(\"=\");\n    k = kv[0];\n    v = kv[1];\n    if (k === \"player_response\") {\n      res[k] = decodeURIComponent(v);\n      // console.log('-------- ', JSON.parse(res[k]).streamingData)\n    }\n  });\n//   console.log(\"-------- \", JSON.parse(res.player_response));\n  return res;\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}